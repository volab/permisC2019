
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Advanced stuf for robot Junior &#8212; Documentation PermisC 2019 </title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="prev" title="Infos générales sur le projet Permis C 2019" href="../index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../index.html" title="Infos générales sur le projet Permis C 2019"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation PermisC 2019 </a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="advanced-stuf-for-robot-junior">
<h1>Advanced stuf for robot Junior<a class="headerlink" href="#advanced-stuf-for-robot-junior" title="Lien permanent vers ce titre">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Pour fonctionner la maquette à besoin de la station sol à cause du NRF24 bloquant
(sauf si la ligne est commentée).</p>
</div>
<div class="section" id="bilan-hardware">
<h2>Bilan hardware<a class="headerlink" href="#bilan-hardware" title="Lien permanent vers ce titre">¶</a></h2>
<p>La liste des broches utilisées dans la version de base se trouve dans <a class="reference external" href="https://github.com/volab/permisC2019/blob/master/_01-docs/_01-userDoc/fiches_peda_pcb_sansvariable/doc_peda_pcb_sansvariable_pdf/robot_junior_Annexe.pdf">les fiches pédagogiques</a> <a class="footnote-reference brackets" href="#id8" id="id9">1</a>
sous Github</p>
<p>La dessus, on ajoute 6 broches pour le capteur du <a class="reference internal" href="#suiveur-de-ligne">Suiveur de ligne</a> (6,8,10,14,16,18)</p>
<p>Le module NRF24 pour la télémétrie utilise les broches SPI cf <a class="reference internal" href="#telemetrie-rf-transmissions">Télémètrie / RF transmissions</a> ainsi
que 48 et 49</p>
<p>La mesure de la tension batterie est sur A0</p>
</div>
<div class="section" id="suiveur-de-ligne">
<h2>Suiveur de ligne<a class="headerlink" href="#suiveur-de-ligne" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://www.hackster.io/cytron-technologies/building-a-low-cost-line-following-robot-c4a32e">Projet très ressemblant sur Hackster.io</a> <a class="footnote-reference brackets" href="#id10" id="id11">2</a></p>
<p>3 capteurs IR de chaque côté</p>
<p>Ajout d’un connecteur 8 points.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 38%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Pin</p></th>
<th class="head"><p>Signal</p></th>
<th class="head"><p>Arduino pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>GND</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>D EXT</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>D MID</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>D INT</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>G INT</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>G MID</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>G EXT</p></td>
<td><p>18</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>P5V</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="section" id="resultats">
<h3>Résultats<a class="headerlink" href="#resultats" title="Lien permanent vers ce titre">¶</a></h3>
<p>Enregistrement avec station sol NRF24L01</p>
<div class="figure align-center" id="id1" style="width: 100%">
<a class="reference internal image-reference" href="../_images/NRF24stationSol.jpg"><img alt="Station sol" src="../_images/NRF24stationSol.jpg" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Station sol NRF24</span><a class="headerlink" href="#id1" title="Lien permanent vers cette image">¶</a></p>
</div>
<dl class="simple">
<dt>Test du 23/11/2019 à 18:52</dt><dd><ul class="simple">
<li><p>VBAT 6.9V à 7.4V</p></li>
<li><p>vitesse : 90</p></li>
<li><p>Durée du test : 072725 au chrono manuel 1:11:53</p></li>
<li><p>les 4 points; 08:80, 24:68, 47:97, 1:03:21 (En ms 8800, 24680, 47970, 63210, 71530).</p></li>
</ul>
</dd>
</dl>
<p>Essais de vitesse : 7.0V 120 ok putty_tx_191123_2131</p>
<p>Remplacement des batterie
7.8V(ie 8.4V à vide) KO pour 120
7.7 90 OK putty_tx_191123_2316.log en 57s
7.7V vitesse 110 ok 46s putty_tx_191124_0000.log</p>
<p>Temps de cycle à 10ms putty_tx_191124_0008.log
TC 10ms V 110 BAT 7.7V putty_tx_191124_0017.log US actif refresh every 10ms</p>
</div>
<div class="section" id="mesure-de-vitesse">
<h3>Mesure de vitesse<a class="headerlink" href="#mesure-de-vitesse" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sur une ligne droite de 3m parcours en 7s (vitesse dans le code : 110, tension bat-moyenne: 7.45V)
3/7 m/s soit 42.85cm/s = 1.54km/h
Diam roue = 65mm Périmètre = 204mm on tourne à 2.1 tr/s soit environ 126tr/min
Mesure au tachymetre à vide : 171 RPM</p>
<p>Même essai à 90 (7.42V pour 7.87V à vide) : 3m en 9.4s
à 70 : 3m en 16.7s</p>
<p>Avec batterie full : 13.5s
avec 90 8.43s fichier non conservé
avec 110 6.5s Vbat_moy : 7.65V - en charge - mesurées à 8.18V à vide  fichier : putty_tx_191126_2317_3m_110_full.log</p>
<p>V=200 4.6s, VBAT 7.5V</p>
<p>Le reste des résultats est consigné dans le fichier Excel : speeds.xlsx</p>
<p>En conclusion on est à environ 110tr/min</p>
</div>
<div class="section" id="calcul-du-demi-tour">
<h3>Calcul du demi tour<a class="headerlink" href="#calcul-du-demi-tour" title="Lien permanent vers ce titre">¶</a></h3>
<p>Diametre de roue 65mm, soit un périmètre de 204mm.</p>
<p>Vitesse 120tr/min (Vbat 7.2V consigne 115) soit 2tr/s soit encore 0.02tr/cycle de 10ms.</p>
<p>Ce qui nous donne un déplacement de’environ 4mm/cycle (204*0.02).</p>
<p>Pour faire un demi tour en bloquant une roue, il faut parcourir un demi périmètre du cercle décrit
par une roue (entraxe des roues 110mm).</p>
<p>Distance à parcourir pixD/2 soit encore pi*R soit 346mm à raison de 4mm/cycle, il faut 86.5 cycles.</p>
<p>Résultat expérimental : avec 90 cycles on a seulement un bon tiers de tour.</p>
<p>Explication : au démarrage de la rotation la roue en rotation « broute ».</p>
<p>Par expérimentation (branche cpUnTour) on arrive à environ 120 cycles pour un demi-tour.</p>
<p>En activant les 2 roues une en avant et l’autre en arrière la valeur serait de 55, le mouvement est
alors plus agréable.</p>
</div>
<div class="section" id="maitrise-des-deplacements">
<h3>Maitrise des déplacements<a class="headerlink" href="#maitrise-des-deplacements" title="Lien permanent vers ce titre">¶</a></h3>
<p>A VBAT = 7.5V, V = 110, on fait du 4mm/cycle de 10ms
A VBAT = 7.5V, V = 70, on fait du 2mm/cycle</p>
</div>
<div class="section" id="fin-des-travaux-suivenur-de-ligne-decembre-2019">
<h3>Fin des travaux suivenur de ligne décembre 2019<a class="headerlink" href="#fin-des-travaux-suivenur-de-ligne-decembre-2019" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="simple">
<dt>Resterait à faire:</dt><dd><ul class="simple">
<li><p>évaluation du sens du virage avant la perte de ligne</p></li>
<li><p>ralentir dans les virages</p></li>
<li><p>plusieurs canaux de télémétrie (BLE4.0 et LORA cartes reçues)</p></li>
<li><p>adapter la vitesse en fonction de la tension batterie</p></li>
<li><p>ajouter l’odomètrie</p></li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="telemetrie-rf-transmissions">
<h2>Télémètrie / RF transmissions<a class="headerlink" href="#telemetrie-rf-transmissions" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="besoin-debit">
<h3>Besoin  débit<a class="headerlink" href="#besoin-debit" title="Lien permanent vers ce titre">¶</a></h3>
<p>Exemple:</p>
<p>On part sur 32 octets soit 320bits en moins de 1ms à transmettre</p>
<p>1 bits (1/320)ms = 3.215 10-6 environ 312kbits/s</p>
<p>Trame: (séparateur ,)</p>
<p>Sensor gauche (1c),Sensor droit (1c),Vbat(3c),reserve (3c) soit 11 octets</p>
<p>Exemple:</p>
<p>4,0,3.2,0.0</p>
<p>11 octets trasmis en 1ms (max)</p>
<p>10-3/110 = 9us/bits soit 110kbits/s</p>
</div>
<div class="section" id="choix-du-module-rf">
<h3>Choix du module RF<a class="headerlink" href="#choix-du-module-rf" title="Lien permanent vers ce titre">¶</a></h3>
<p>Très bonne vidéo youtube:  <a class="reference external" href="https://www.youtube.com/watch?v=vxF1N9asjts">Electronoobs</a> <a class="footnote-reference brackets" href="#id12" id="id13">3</a></p>
</div>
<div class="section" id="mhz-low-cost-modules">
<h3>433MHz low cost modules<a class="headerlink" href="#mhz-low-cost-modules" title="Lien permanent vers ce titre">¶</a></h3>
<p>Utilisation de module 433MHz solution rapidement abandonnée porté insufisante au travers des murs.</p>
<div class="figure align-left" id="id2" style="width: 100%">
<a class="reference internal image-reference" href="../_images/moduleRF.jpg"><img alt="Modules RF 433MHz" src="../_images/moduleRF.jpg" style="width: 200px;" /></a>
<p class="caption"><span class="caption-text">Modules RF 433MHz</span><a class="headerlink" href="#id2" title="Lien permanent vers cette image">¶</a></p>
</div>
<p>Deux fils de 173mm de long pour les antennes des modules radio.</p>
<p>Communiquer sans fil en 433MHz avec la bibliothèque VirtualWire et une carte Arduino / Genuino sur
<a class="reference external" href="https://www.carnetdumaker.net/articles/communiquer-sans-fil-en-433mhz-avec-la-bibliotheque-virtualwire-et-une-carte-arduino-genuino/">les carnets du maker</a> <a class="footnote-reference brackets" href="#id14" id="id15">4</a></p>
<p>Très bon article sur <a class="reference external" href="https://dronebotworkshop.com/433mhz-rf-modules-arduino/">DroneBot Workshop</a> <a class="footnote-reference brackets" href="#id18" id="id19">6</a></p>
<p><a class="reference external" href="https://www.airspayce.com/mikem/arduino/RadioHead/">Radiohead library</a> <a class="footnote-reference brackets" href="#id16" id="id17">5</a></p>
</div>
<div class="section" id="acp220-modules">
<h3>ACP220 modules<a class="headerlink" href="#acp220-modules" title="Lien permanent vers ce titre">¶</a></h3>
<p>On a pas réussi à les faire fonctionner</p>
<p>Nous avons réussi à les faire communiquer avec le logiciel prévu pour les paramètrer: RF-Magic</p>
<p>A condition de lancer le logiciel en mode admi (sous W7) et de changer le nom du port COM
pour un nom ne comportant qu’un seul digit de COM37 vers COM2 par exemple.</p>
<p>Essais à 433MHz, 470, 434 avec les même id node et des id différents. sans aucun succès.</p>
<p>Module récupérer il y a quelques année impossible de dire s’ils étaient fonctionnels.</p>
</div>
<div class="section" id="nf24">
<h3>NF24<a class="headerlink" href="#nf24" title="Lien permanent vers ce titre">¶</a></h3>
<p>Utilisation de la librairie : <a class="reference external" href="https://github.com/nRF24/RF24">RF24 from TMRh20</a> <a class="footnote-reference brackets" href="#id20" id="id21">7</a> disponible sur github mais aussi directement
dans le gestionnaire de librairie ARDUINO. Librairie très bien renseignée avec une documentation
très complète sous Doxygen.</p>
<p>Les <a class="reference external" href="https://www.amazon.fr/Pixnor-NRF24L01-%C3%A9metteurr%C3%A9cepteur-Arduino-Compatible/dp/B016BAM80C/ref=sr_1_4?ie=UTF8&amp;qid=1451854927&amp;sr=8-4&amp;keywords=nrf24l01">modules NRF24RL01</a> <a class="footnote-reference brackets" href="#id22" id="id23">8</a> utilsés proviennent de chez Amazon.</p>
<div class="figure align-left" id="id3" style="width: 100%">
<a class="reference internal image-reference" href="../_images/NRF24modules_.jpg"><img alt="NRF24L01 modules" src="../_images/NRF24modules_.jpg" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">NRF24L01 modules</span><a class="headerlink" href="#id3" title="Lien permanent vers cette image">¶</a></p>
</div>
<p>Réussite. Transfert de 4 puis 8 octets à 2Mbps.</p>
<p>Le temps total d’aller et retour est d’environ 1.4ms. Utilisation du sketch exemple GettingStarted.ino
Léèrement modifié.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* Getting Started example sketch for nRF24L01+ radios</span>
<span class="cm">* This is a very basic example of how to send data from one node to another</span>
<span class="cm">* Updated: Dec 2014 by TMRh20</span>
<span class="cm">*/</span>

<span class="cp">#include</span> <span class="cpf">&lt;SPI.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;RF24.h&quot;</span><span class="cp"></span>

<span class="cm">/****************** User Config ***************************/</span>
<span class="cm">/***      Set this radio as radio number 0 or 1         ***/</span>
<span class="kt">bool</span> <span class="n">radioNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="cm">/* Hardware configuration: Set up nRF24L01 radio on SPI bus plus pins 7 &amp; 8 */</span>
<span class="n">RF24</span> <span class="nf">radio</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">);</span>
<span class="cm">/**********************************************************/</span>

<span class="n">byte</span> <span class="n">addresses</span><span class="p">[][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;Node1&quot;</span><span class="p">,</span><span class="s">&quot;Node2&quot;</span><span class="p">};</span>

<span class="c1">// Used to control whether this node is sending or receiving</span>
<span class="kt">bool</span> <span class="n">role</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cpt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;RF24/examples/GettingStarted&quot;</span><span class="p">));</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;*** PRESS &#39;T&#39; to begin transmitting to the other node&quot;</span><span class="p">));</span>

  <span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>

  <span class="c1">// Set the PA Level low to prevent power supply related issues since this is a</span>
 <span class="c1">// getting_started sketch, and the likelihood of close proximity of the devices. RF24_PA_MAX is default.</span>
  <span class="n">radio</span><span class="p">.</span><span class="n">setPALevel</span><span class="p">(</span><span class="n">RF24_PA_MAX</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">radio</span><span class="p">.</span><span class="n">setDataRate</span><span class="p">(</span> <span class="n">RF24_2MBPS</span> <span class="p">)</span> <span class="p">)</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;speed is now 2Mbps&quot;</span><span class="p">);</span>


  <span class="c1">// Open a writing and reading pipe on each radio, with opposite addresses</span>
  <span class="k">if</span><span class="p">(</span><span class="n">radioNumber</span><span class="p">){</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Je suis le node : &quot;</span><span class="p">);</span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Je suis le node : &quot;</span><span class="p">);</span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">radio</span><span class="p">.</span><span class="n">isChipConnected</span><span class="p">()</span> <span class="p">){</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; Pb connection ! Aborted.&quot;</span><span class="p">);</span>
      <span class="k">for</span><span class="p">(;;);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span> <span class="s">&quot;appreil bien connecte.&quot;</span><span class="p">);</span>
      <span class="c1">// for(;;);</span>
  <span class="p">}</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;pa level : &quot;</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span> <span class="n">radio</span><span class="p">.</span><span class="n">getPALevel</span><span class="p">()</span> <span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Payloadsize : &quot;</span><span class="p">);</span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span> <span class="n">radio</span><span class="p">.</span><span class="n">getPayloadSize</span><span class="p">()</span> <span class="p">);</span>

  <span class="c1">// Start the radio listening for data</span>
  <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>


<span class="cm">/****************** Ping Out Role ***************************/</span>
<span class="k">if</span> <span class="p">(</span><span class="n">role</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>  <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;TX role&quot;</span><span class="p">);</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>                                    <span class="c1">// First, stop listening so we can talk.</span>


    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Now sending&quot;</span><span class="p">));</span>

    <span class="c1">// unsigned long start_time = micros();                             // Take the time, and send it.  This will block until complete</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">start_time</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">start_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span> <span class="n">micros</span><span class="p">();</span>                             <span class="c1">// Take the time, and send it.  This will block until complete</span>
    <span class="n">start_time</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
     <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span> <span class="n">start_time</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="p">)){</span>
       <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;failed&quot;</span><span class="p">));</span>
     <span class="p">}</span>

    <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>                                    <span class="c1">// Now, continue listening</span>

    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">started_waiting_at</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>               <span class="c1">// Set up a timeout period, get the current microseconds</span>
    <span class="n">boolean</span> <span class="n">timeout</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>                                   <span class="c1">// Set up a variable to indicate if a response was received or not</span>

    <span class="k">while</span> <span class="p">(</span> <span class="o">!</span> <span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">()</span> <span class="p">){</span>                             <span class="c1">// While nothing is received</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">started_waiting_at</span> <span class="o">&gt;</span> <span class="mi">200000</span> <span class="p">){</span>            <span class="c1">// If waited longer than 200ms, indicate timeout and exit while loop</span>
          <span class="n">timeout</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="n">timeout</span> <span class="p">){</span>                                             <span class="c1">// Describe the results</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Failed, response timed out.&quot;</span><span class="p">));</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">got_time</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>                                 <span class="c1">// Grab the response, compare, and send to debugging spew</span>
        <span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span> <span class="n">got_time</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="p">);</span>
        <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">end_time</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>

        <span class="c1">// Spew it</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Sent &quot;</span><span class="p">));</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">start_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">start_time</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;, Got response &quot;</span><span class="p">));</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">got_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">got_time</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;, Round-trip delay &quot;</span><span class="p">));</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">end_time</span><span class="o">-</span><span class="n">start_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot; microseconds&quot;</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// Try again 1s later</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
  <span class="p">}</span>



<span class="cm">/****************** Pong Back Role ***************************/</span>

<span class="k">if</span> <span class="p">(</span> <span class="n">role</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">){</span>
    <span class="c1">// unsigned long got_time;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">got_time</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="c1">// Serial.print(&quot;Role peroquet.&quot;);</span>
    <span class="c1">// Serial.println( cpt++);</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">()){</span>
        <span class="c1">// Variable for the received timestamp</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">())</span> <span class="p">{</span>                                   <span class="c1">// While there is data ready</span>
            <span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span> <span class="n">got_time</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="p">);</span>             <span class="c1">// Get the payload</span>
        <span class="p">}</span>

        <span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>                                        <span class="c1">// First, stop listening so we can talk</span>
        <span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span> <span class="n">got_time</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="p">);</span>              <span class="c1">// Send the final one back.</span>
        <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>                                       <span class="c1">// Now, resume listening so we catch the next packets.</span>
        <span class="c1">// Serial.print(F(&quot;Sent response &quot;));</span>
        <span class="c1">// Serial.println(got_time);</span>
    <span class="p">}</span>
<span class="p">}</span>




<span class="cm">/****************** Change Roles via Serial Commands ***************************/</span>

  <span class="k">if</span> <span class="p">(</span> <span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span> <span class="p">)</span>
  <span class="p">{</span>
    <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">());</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;T&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">role</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">){</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;*** CHANGING TO TRANSMIT ROLE -- PRESS &#39;R&#39; TO SWITCH BACK&quot;</span><span class="p">));</span>
      <span class="n">role</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                  <span class="c1">// Become the primary transmitter (ping out)</span>

   <span class="p">}</span><span class="k">else</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;R&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">role</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">){</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;*** CHANGING TO RECEIVE ROLE -- PRESS &#39;T&#39; TO SWITCH BACK&quot;</span><span class="p">));</span>
       <span class="n">role</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                <span class="c1">// Become the primary receiver (pong back)</span>
       <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>

    <span class="p">}</span>
  <span class="p">}</span>


<span class="p">}</span> <span class="c1">// Loop</span>
</pre></div>
</div>
<p>La doc de la méthode write, nous apprend que c’est une méthode bloquante et que la pyload est fixe.</p>
<p>La méthode getPayloadSize() renvoi 32. donc que nous transmettion 8 ou 32 octets le temps sera
identique !</p>
<p>On atteind facilement les extrémité du lab en conservant 1.5ms.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Les broche 7 et 8 étaient inversée.</p>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span> <span class="cm">/**</span>
<span class="cm">* Arduino Constructor</span>
<span class="cm">*</span>
<span class="cm">* Creates a new instance of this driver.  Before using, you create an instance</span>
<span class="cm">* and send in the unique pins that this chip is connected to.</span>
<span class="cm">*</span>
<span class="cm">* @param _cepin The pin attached to Chip Enable on the RF module</span>
<span class="cm">* @param _cspin The pin attached to Chip Select</span>
<span class="cm">*/</span>
 <span class="n">RF24</span><span class="p">(</span><span class="kt">uint16_t</span> <span class="n">_cepin</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">_cspin</span><span class="p">);</span>
</pre></div>
</div>
<p>Temps d’émission mesuré avec la technique de micros : 700us entre mon poste et l’autre extrêmité
du lab.</p>
</div>
<div class="section" id="mise-en-place-du-module-nrf24-sur-le-robot">
<h3>Mise en place du module NRF24 sur le robot<a class="headerlink" href="#mise-en-place-du-module-nrf24-sur-le-robot" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sur la maquette ainsi que sur la version PCB, nous n’avons que peu de lattitude pour ajouter des
modules. Chance, la 2560pro fourni un petit connecteur de 6 IO que nous n’avons pas utilisé.</p>
<div class="figure align-center" id="id4" style="width: 100%">
<a class="reference internal image-reference" href="../_images/broches2560Dispo.jpg"><img alt="Connecteur 2560pro 6 io" src="../_images/broches2560Dispo.jpg" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Connecteur 2560pro 6 io</span><a class="headerlink" href="#id4" title="Lien permanent vers cette image">¶</a></p>
</div>
<p>En réalité, ces 6 broches ne sont pas vraiment disponibles si on veut utiliser le bus SPI.
En effet, sur l’ATMega2560 le bus SPI est sur ces broches… seules 48 et 49 sont vraiment
disponibles.</p>
<div class="figure align-center" id="id5" style="width: 100%">
<a class="reference internal image-reference" href="../_images/48_53MosiMiso.jpg"><img alt="Connecteur 2560pro partage SPI" src="../_images/48_53MosiMiso.jpg" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Connecteur 2560pro 6 Connecteur 2560pro partage SPI</span><a class="headerlink" href="#id5" title="Lien permanent vers cette image">¶</a></p>
</div>
<p>Réalisation d’un adaptateur :</p>
<div class="figure align-center" id="id6" style="width: 100%">
<a class="reference internal image-reference" href="../_images/cablageAdaptNRF24.jpg"><img alt="adatateur NRF24 cablage" src="../_images/cablageAdaptNRF24.jpg" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Adatateur NRF24 plan de cablage</span><a class="headerlink" href="#id6" title="Lien permanent vers cette image">¶</a></p>
</div>
<div class="figure align-center" id="id7" style="width: 100%">
<a class="reference internal image-reference" href="../_images/NRF24pinout.png"><img alt="NRF24L01 modules" src="../_images/NRF24pinout.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">NRD24L01 pinout</span><a class="headerlink" href="#id7" title="Lien permanent vers cette image">¶</a></p>
</div>
<p>texte</p>
</div>
<div class="section" id="autres-solutions-a-explorer">
<h3>Autres solutions à explorer<a class="headerlink" href="#autres-solutions-a-explorer" title="Lien permanent vers ce titre">¶</a></h3>
<p>XBEE : product line sur protocole ZigBee</p>
<p>Diffcile à approvisionner sur le marcher chinois et relativement honéreux.</p>
<p>Dispo <a class="reference external" href="https://www.mouser.fr/ProductDetail/Digi-International/XB3-24Z8PT-J?qs=sGAEpiMZZMve4%2FbfQkoj%252BHnv3ft0YYh1ZelV1uOq7SE%3D">XBEE chez MOUSER</a> <a class="footnote-reference brackets" href="#id24" id="id25">9</a> à 18€ sans antenne sachant qu’il en faut au moins 2</p>
<p>Préférer les modules en 2.4GHz à mon avis (pifométrique)</p>
<p>LORA un bon <a class="reference external" href="https://www.hackster.io/xreef/lora-e32-device-for-arduino-esp32-or-esp8266-library-728a86">exemple sur Hacksterio</a> <a class="footnote-reference brackets" href="#id26" id="id27">10</a></p>
<p>BLE4.0</p>
<p>Modules <a class="reference external" href="https://www.amazon.com/DSD-TECH-Bluetooth-iBeacon-Arduino/dp/B06WGZB2N4/ref=sr_1_10?keywords=BLE&amp;qid=1573809341&amp;s=electronics&amp;sr=1-10">BLE sur AMAZON</a> <a class="footnote-reference brackets" href="#id28" id="id29">11</a> à 9.99€ pièce</p>
<p>Modules <a class="reference external" href="https://fr.aliexpress.com/item/32672670920.html?src=google&amp;src=google&amp;albch=shopping&amp;acnt=494-037-6276&amp;isdl=y&amp;slnk=&amp;plac=&amp;mtctp=&amp;albbt=Google_7_shopping&amp;aff_platform=google&amp;aff_short_key=UneMJZVf&amp;&amp;albagn=888888&amp;albcp=6459793138&amp;albag=77316928277&amp;trgt=743612850714&amp;crea=fr32672670920&amp;netw=u&amp;device=c&amp;gclid=Cj0KCQiAtrnuBRDXARIsABiN-7C4xnJh8vQRrAfhBURZXjxJaNliTPFUQSnPELZ7C6L5TvKNkYxi3nsaAoWlEALw_wcB&amp;gclsrc=aw.ds">BLE sur aliExpress</a> <a class="footnote-reference brackets" href="#id30" id="id31">12</a> à 2.33€ basé sur un CC2541 de TI</p>
<p><a class="reference external" href="https://www.electroschematics.com/getting-started-with-ble-and-arduino/">Exemple ARDUINO</a> <a class="footnote-reference brackets" href="#id32" id="id33">13</a></p>
<p><a class="reference external" href="https://www.amazon.com/DSD-TECH-Bluetooth-CC2640R2F-Arduino/dp/B07MBLVHH8/ref=sr_1_17?keywords=BLE&amp;qid=1573809341&amp;s=electronics&amp;sr=1-17">BLE5.0 sur AMAZON</a> <a class="footnote-reference brackets" href="#id34" id="id35">14</a> 9.99€ basé sur un CC2640R2F de TI</p>
<p><a class="reference external" href="http://www.dsdtech-global.com/2019/01/dsdtech-sh-11-ble.html">DSD Tech</a> <a class="footnote-reference brackets" href="#id36" id="id37">15</a> official website</p>
</div>
</div>
<div class="section" id="rpm-mesure">
<h2>RPM Mesure<a class="headerlink" href="#rpm-mesure" title="Lien permanent vers ce titre">¶</a></h2>
<p>140 à vide pouvant descendre jusqu’à 50 en charge mais une valeur raisonnable semble être 130 rpm.
Pour un PWM à 100</p>
<p>260 RPM full batterie et PWM à 250</p>
<p>109 RMP full batterie et pour PWM 70</p>
<p>109 rpm avec des roues de 66mm
Soit 1 tour 66x2xpimm = 415mm x 109 / 60 soit 753mm/s ou encore 0.753mm/ms
3.77mm / cycle de 5ms</p>
</div>
<div class="section" id="mesure-de-temps-de-cycle">
<h2>Mesure de temps de cycle<a class="headerlink" href="#mesure-de-temps-de-cycle" title="Lien permanent vers ce titre">¶</a></h2>
<p>Mesure du temps nécessaire pour exécuter la mise à jour des pwm moteur</p>
<p>méthode : void CRobotJunior::update()</p>
<p>Branche devJojo_sans_OptiVersionAvecTlmNRF24, commit : 53488c</p>
<p>Temps mesuré à l’oscilloscope 69us (y compris les 2 digitalWrite qui prennet chacun environ 9us)</p>
<p>Plus grâve est le temps de répétition qui vaut une vingtaine de ms très instable. Cause identifiée :
les capteurs ultrason et leur timeout à 30ms utilisant la fonction pulse bloquante.</p>
<p>une solution élégante serait de fixer le timeout à 2900us soit 50cm.</p>
<p>En désactivant tout, le temps de cyle est à 5ms/+1.4ms : ce jitter de 1.4ms est inexplicable et persiste
même en aillant désactivé tous les update de la méthode robot.update(). Un début d’explication serait
dans l’implémentation de la foinction millis elle-même voir sur le <a class="reference external" href=":https://forum.arduino.cc/index.php?topic=46351.0">forum ARDUINO</a> <a class="footnote-reference brackets" href="#id38" id="id39">16</a></p>
</div>
<div class="section" id="batterie-pack">
<h2>Batterie pack<a class="headerlink" href="#batterie-pack" title="Lien permanent vers ce titre">¶</a></h2>
<p>16850 batterie</p>
<p>Chargeur de batteries</p>
<p><a class="reference external" href="http://wiki.seeedstudio.com/Grove-LED_Bar/">LED bar : Seedstudio</a> <a class="footnote-reference brackets" href="#id40" id="id41">17</a></p>
<p>ou</p>
</div>
<div class="section" id="weblinks">
<h2>Weblinks<a class="headerlink" href="#weblinks" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id8"><span class="brackets"><a class="fn-backref" href="#id9">1</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/volab/permisC2019/blob/master/_01-docs/_01-userDoc/fiches_peda_pcb_sansvariable/doc_peda_pcb_sansvariable_pdf/robot_junior_Annexe.pdf">https://github.com/volab/permisC2019/blob/master/_01-docs/_01-userDoc/fiches_peda_pcb_sansvariable/doc_peda_pcb_sansvariable_pdf/robot_junior_Annexe.pdf</a></p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id11">2</a></span></dt>
<dd><p><a class="reference external" href="https://www.hackster.io/cytron-technologies/building-a-low-cost-line-following-robot-c4a32e">https://www.hackster.io/cytron-technologies/building-a-low-cost-line-following-robot-c4a32e</a></p>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id13">3</a></span></dt>
<dd><p><a class="reference external" href="https://www.youtube.com/watch?v=vxF1N9asjts">https://www.youtube.com/watch?v=vxF1N9asjts</a></p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id15">4</a></span></dt>
<dd><p><a class="reference external" href="https://www.carnetdumaker.net/articles/communiquer-sans-fil-en-433mhz-avec-la-bibliotheque-virtualwire-et-une-carte-arduino-genuino/">https://www.carnetdumaker.net/articles/communiquer-sans-fil-en-433mhz-avec-la-bibliotheque-virtualwire-et-une-carte-arduino-genuino/</a></p>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id17">5</a></span></dt>
<dd><p><a class="reference external" href="https://www.airspayce.com/mikem/arduino/RadioHead/">https://www.airspayce.com/mikem/arduino/RadioHead/</a></p>
</dd>
<dt class="label" id="id18"><span class="brackets"><a class="fn-backref" href="#id19">6</a></span></dt>
<dd><p><a class="reference external" href="https://dronebotworkshop.com/433mhz-rf-modules-arduino/">https://dronebotworkshop.com/433mhz-rf-modules-arduino/</a></p>
</dd>
<dt class="label" id="id20"><span class="brackets"><a class="fn-backref" href="#id21">7</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/nRF24/RF24">https://github.com/nRF24/RF24</a></p>
</dd>
<dt class="label" id="id22"><span class="brackets"><a class="fn-backref" href="#id23">8</a></span></dt>
<dd><p><a class="reference external" href="https://www.amazon.fr/Pixnor-NRF24L01-%C3%A9metteurr%C3%A9cepteur-Arduino-Compatible/dp/B016BAM80C/ref=sr_1_4?ie=UTF8&amp;qid=1451854927&amp;sr=8-4&amp;keywords=nrf24l01">https://www.amazon.fr/Pixnor-NRF24L01-%C3%A9metteurr%C3%A9cepteur-Arduino-Compatible/dp/B016BAM80C/ref=sr_1_4?ie=UTF8&amp;qid=1451854927&amp;sr=8-4&amp;keywords=nrf24l01</a></p>
</dd>
<dt class="label" id="id24"><span class="brackets"><a class="fn-backref" href="#id25">9</a></span></dt>
<dd><p><a class="reference external" href="https://www.mouser.fr/ProductDetail/Digi-International/XB3-24Z8PT-J?qs=sGAEpiMZZMve4%2FbfQkoj%252BHnv3ft0YYh1ZelV1uOq7SE%3D">https://www.mouser.fr/ProductDetail/Digi-International/XB3-24Z8PT-J?qs=sGAEpiMZZMve4%2FbfQkoj%252BHnv3ft0YYh1ZelV1uOq7SE%3D</a></p>
</dd>
<dt class="label" id="id26"><span class="brackets"><a class="fn-backref" href="#id27">10</a></span></dt>
<dd><p><a class="reference external" href="https://www.hackster.io/xreef/lora-e32-device-for-arduino-esp32-or-esp8266-library-728a86">https://www.hackster.io/xreef/lora-e32-device-for-arduino-esp32-or-esp8266-library-728a86</a></p>
</dd>
<dt class="label" id="id28"><span class="brackets"><a class="fn-backref" href="#id29">11</a></span></dt>
<dd><p><a class="reference external" href="https://www.amazon.com/DSD-TECH-Bluetooth-iBeacon-Arduino/dp/B06WGZB2N4/ref=sr_1_10?keywords=BLE&amp;qid=1573809341&amp;s=electronics&amp;sr=1-10">https://www.amazon.com/DSD-TECH-Bluetooth-iBeacon-Arduino/dp/B06WGZB2N4/ref=sr_1_10?keywords=BLE&amp;qid=1573809341&amp;s=electronics&amp;sr=1-10</a></p>
</dd>
<dt class="label" id="id30"><span class="brackets"><a class="fn-backref" href="#id31">12</a></span></dt>
<dd><p><a class="reference external" href="https://fr.aliexpress.com/item/32672670920.html?src=google&amp;src=google&amp;albch=shopping&amp;acnt=494-037-6276&amp;isdl=y&amp;slnk=&amp;plac=&amp;mtctp=&amp;albbt=Google_7_shopping&amp;aff_platform=google&amp;aff_short_key=UneMJZVf&amp;&amp;albagn=888888&amp;albcp=6459793138&amp;albag=77316928277&amp;trgt=743612850714&amp;crea=fr32672670920&amp;netw=u&amp;device=c&amp;gclid=Cj0KCQiAtrnuBRDXARIsABiN-7C4xnJh8vQRrAfhBURZXjxJaNliTPFUQSnPELZ7C6L5TvKNkYxi3nsaAoWlEALw_wcB&amp;gclsrc=aw.ds">https://fr.aliexpress.com/item/32672670920.html?src=google&amp;src=google&amp;albch=shopping&amp;acnt=494-037-6276&amp;isdl=y&amp;slnk=&amp;plac=&amp;mtctp=&amp;albbt=Google_7_shopping&amp;aff_platform=google&amp;aff_short_key=UneMJZVf&amp;&amp;albagn=888888&amp;albcp=6459793138&amp;albag=77316928277&amp;trgt=743612850714&amp;crea=fr32672670920&amp;netw=u&amp;device=c&amp;gclid=Cj0KCQiAtrnuBRDXARIsABiN-7C4xnJh8vQRrAfhBURZXjxJaNliTPFUQSnPELZ7C6L5TvKNkYxi3nsaAoWlEALw_wcB&amp;gclsrc=aw.ds</a></p>
</dd>
<dt class="label" id="id32"><span class="brackets"><a class="fn-backref" href="#id33">13</a></span></dt>
<dd><p><a class="reference external" href="https://www.electroschematics.com/getting-started-with-ble-and-arduino/">https://www.electroschematics.com/getting-started-with-ble-and-arduino/</a></p>
</dd>
<dt class="label" id="id34"><span class="brackets"><a class="fn-backref" href="#id35">14</a></span></dt>
<dd><p><a class="reference external" href="https://www.amazon.com/DSD-TECH-Bluetooth-CC2640R2F-Arduino/dp/B07MBLVHH8/ref=sr_1_17?keywords=BLE&amp;qid=1573809341&amp;s=electronics&amp;sr=1-17">https://www.amazon.com/DSD-TECH-Bluetooth-CC2640R2F-Arduino/dp/B07MBLVHH8/ref=sr_1_17?keywords=BLE&amp;qid=1573809341&amp;s=electronics&amp;sr=1-17</a></p>
</dd>
<dt class="label" id="id36"><span class="brackets"><a class="fn-backref" href="#id37">15</a></span></dt>
<dd><p><a class="reference external" href="http://www.dsdtech-global.com/2019/01/dsdtech-sh-11-ble.html">http://www.dsdtech-global.com/2019/01/dsdtech-sh-11-ble.html</a></p>
</dd>
<dt class="label" id="id38"><span class="brackets"><a class="fn-backref" href="#id39">16</a></span></dt>
<dd><p><a class="reference external" href=":https://forum.arduino.cc/index.php?topic=46351.0">:https://forum.arduino.cc/index.php?topic=46351.0</a></p>
</dd>
<dt class="label" id="id40"><span class="brackets"><a class="fn-backref" href="#id41">17</a></span></dt>
<dd><p><a class="reference external" href="http://wiki.seeedstudio.com/Grove-LED_Bar/">http://wiki.seeedstudio.com/Grove-LED_Bar/</a></p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logoVoLAB_200x200.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table des matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Advanced stuf for robot Junior</a><ul>
<li><a class="reference internal" href="#bilan-hardware">Bilan hardware</a></li>
<li><a class="reference internal" href="#suiveur-de-ligne">Suiveur de ligne</a><ul>
<li><a class="reference internal" href="#resultats">Résultats</a></li>
<li><a class="reference internal" href="#mesure-de-vitesse">Mesure de vitesse</a></li>
<li><a class="reference internal" href="#calcul-du-demi-tour">Calcul du demi tour</a></li>
<li><a class="reference internal" href="#maitrise-des-deplacements">Maitrise des déplacements</a></li>
<li><a class="reference internal" href="#fin-des-travaux-suivenur-de-ligne-decembre-2019">Fin des travaux suivenur de ligne décembre 2019</a></li>
</ul>
</li>
<li><a class="reference internal" href="#telemetrie-rf-transmissions">Télémètrie / RF transmissions</a><ul>
<li><a class="reference internal" href="#besoin-debit">Besoin  débit</a></li>
<li><a class="reference internal" href="#choix-du-module-rf">Choix du module RF</a></li>
<li><a class="reference internal" href="#mhz-low-cost-modules">433MHz low cost modules</a></li>
<li><a class="reference internal" href="#acp220-modules">ACP220 modules</a></li>
<li><a class="reference internal" href="#nf24">NF24</a></li>
<li><a class="reference internal" href="#mise-en-place-du-module-nrf24-sur-le-robot">Mise en place du module NRF24 sur le robot</a></li>
<li><a class="reference internal" href="#autres-solutions-a-explorer">Autres solutions à explorer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rpm-mesure">RPM Mesure</a></li>
<li><a class="reference internal" href="#mesure-de-temps-de-cycle">Mesure de temps de cycle</a></li>
<li><a class="reference internal" href="#batterie-pack">Batterie pack</a></li>
<li><a class="reference internal" href="#weblinks">Weblinks</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="../index.html"
                        title="Chapitre précédent">Infos générales sur le projet Permis C 2019</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/advanced/advanced.rst.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../index.html" title="Infos générales sur le projet Permis C 2019"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation PermisC 2019 </a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, VoLAB.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>